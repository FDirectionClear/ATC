<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ATC测试个人空间</title>
    <!--JQuery-->
    <script src = "JQuery/jquery-3.2.1.min.js"></script>
    <!-- personalpage.js-->
    <script src = "js/personalpage.js"></script>
    <!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <!--suolve.js-->
    <!-- <script src = "js/personalpage.js"></script> -->
    <!--bootstrap-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <!--消除浏览器默认样式--> 
    <link rel = "stylesheet" type = "text/css" href = "css/cleardefault.css"> 
    <!--personalpage样式--> 
    <link rel = "stylesheet" type = "text/css" href = "css/personalpage/personalpage.css">
    <!--personal导航栏统一样式-->
    <link rel="stylesheet" type = "text/css" href="css/personalpage/personalNav.css">
    <!--suolve.css-->
    <link rel="stylesheet" type = "text/css" href="css/personalpage/overview_suolve.css">
    <!--classified.css-->
    <link rel = "stylesheet" type = "text/css" href = "css/personalpage/classified.css">
    <!--checkbar.css-->
    <link rel="stylesheet" type = "text/css" href="css/personalpage/checkbar.css">
</head>
<body>


    <nav class = "personal-nav-a"> <!--personalNav导航栏A-->
        <ul class="nav-main-contents">
            <li><img class = "logo" src="img/personalNav/小初音.jpg" alt=""></li>
            <li class = "char">我的留言</li>
            <li class = "char">TA的留言</li>
            <li><img class="profile" src="img/personalNav/xinai.jpg" alt=""></li>
            <li class = "char plus">
                <!--加号-->
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                <!--下箭头-->
                <span class="small glyphicon glyphicon-menu-down" aria-hidden="true"></span>
            </li>
        </ul>
    </nav>
    <nav class = "personal-nav-b"> <!--personalNav导航栏B-->
        <ul class="nav-main-contents">
            <li><img class = "logo" src="img/personalNav/小初音.jpg" alt=""></li>
            <li class = "char">我的留言</li>
            <li class = "char">TA的留言</li>
            <li><img class="profile" src="img/personalNav/xinai.jpg" alt=""></li>
            <li class = "char plus">
                <!--加号-->
                <span class="glyphicon glyphicon-plus" aria-hidden="true"></span>
                <!--下箭头-->
                <span class="small glyphicon glyphicon-menu-down" aria-hidden="true"></span>
            </li>
        </ul>
    </nav>


<!----------------------------------------以上为导航栏，以下为页面主体------------------------------------------------------------->


    <div class="main-container">  <!--页面主体大容器-->
            

        <div class = "info-left-main"  id = "left"> <!--left父组件-->
           <avatar :manifesto = "manifesto">
                <manifesto @update-mani = "updateMani"></manifesto>
           </avatar>
           
        </div>

        <div class="info-right-main" id = "right" >  <!--页面主体右侧部分-->
            <div class="warning alert alert-warning alert-dismissible" role="alert">
                <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <strong>Warning!</strong> Better check yourself, you're not looking too good.
            </div>
            <tag :taglist = "['预 览 全 部','我 的 成 就']">
                <div class = "pannel-describe" slot = "pannel-describe">这是描述</div>
                <template scope = "props"> <!--props的值来自tag的default slot-->
                    <pannel  :active-pannel = "props.activePannel">
                        <overview slot = "overview"></overview>
                    </pannel>
                
                    <pannel  :active-pannel = "props.activePannel">
                        <checkbar slot = "checkbar" @keystrupdate = "keystrupdate" @key-type-update = "keyTypeUpdate"></checkbar>
                        <classified slot = "classified" :key-str = "keyStr" :key-type = "keyType"></classified>
                    </pannel>
                </template>
            </tag>

        </div>


        <div class = "placeholder">PlaceHolder 1800px</div> <!--巨型占位符-->


    </div>

    <template id = "checkbar">
        <div class="checkbar-container ">

                <div class="input-group search-input">
                    <input v-model = "searchText" type="text" class="form-control" placeholder="Search for title...">
                </div>
                <div class="btn-group selected-btn">
                    <button ref = "selectbtn" type="button"  class="btn btn-warning dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        All <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a href="#" id = "all" @click.prevent = "typeSelect($event)">All</a></li>
                        <li><a href="#" @click.prevent = "typeSelect($event)">数学建模</a></li>
                        <li><a href="#" @click.prevent = "typeSelect($event)">吃屎</a></li>
                        <li><a href="#" @click.prevent = "typeSelect($event)">红色行动</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#" @click.prevent = "typeSelect($event)">其他</a></li>
                    </ul>
                </div>
                <div class="btn-group selected-btn">
                    <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        New <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu">
                        <li><a href="">数学建模</a></li>
                        <li><a href="#">互联网+</a></li>
                        <li><a href="#">红色行动</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">其他</a></li>
                    </ul>
                </div>
                <hr>

        </div>
    </template>

    <!--本组件为classified，可以自行请求ajax数据-->
    <template id = "classified">
        <div class = 'classified-container'>
            <ul>
                <li v-for = "(item,index) in items" v-show = "claMatch(item,currentKeyStr)">
                    <div class = "cla-left">
                        <h2 class = "cla-title">{{item.title}}</h2>
                        <h3 class = "cla-keywords"><span v-for = "key in item.keyWords">{{key}}</span></h3>
                        <h3 class = "cla-resume">{{item.resume.slice(0,23)}}......<!--天学习都很开心，所以我非常
                        的喜欢魂魄妖梦，我非常喜欢妖梦。妖梦给了我很多的动力！我是从幻想万华镜中了解到妖梦的，之所以我喜欢，
                        是因为他太萌了，蝴蝶结魅力十足，蝴蝶结赛高，裸腿赛高，波波头赛高！--></h3>
                        <h4 class = "cla-type-num">
                            <span>{{item.type}}</span><span>{{item.num}}</span>
                        </h4>
                    </div>
            
                    <div class = "cla-right">
                        <div class = "cla-img-box">
                            <img v-for = "img in item.imgSrc" class = "cla-img-1" :src = "img">
                        <div>
                    </div>
                </li>
            </ul>
            
        </div>
    </template>


    <!--overview组件有独立请求Ajax的能力，后端请求回来的成就数据由组件本身下发-->
    <template id = "overview">
        <div class = "overbox">
            <div class = "white" v-for = "item in items"><!--1.所有的上传成就信息的对象数组items，一次的所有信息组成item对象-->
                <div class="suolve" >
                    <div class="suolve-top-box" >
                        <div class="date">
                            <!--2.时间data yy-dd--> 
                            <span class="day">{{item.data.slice(0,2)}}</span>
                            <span class="month">{{item.data.slice(2)}}</span>
                        </div>
                        <!-- <div class="see-picture">
                            <span>照片</span>
                        </div> -->
                        <div class="top-shawdow" style="display: none;"></div>
                        <!--3.第一张图片的地址 imgSrc-->
                        <img class="picture" :src="item.imgSrc">
                    </div>
                    <div class="suolve-bottom-box">
                        <div class="title-box">
                            <!--4.单次上传的标题信息 title-->
                            <h1 class="title">{{ item.title }}</h1>
                            <h2 class="diy-label">
                                <ul class="liy-label-list">
                                    <!--5.关键词，最多五个 keyWords-->
                                    <li class="label" v-for = "(key,index) in item.keyWords">{{ key }}</li>
                                </ul>
                            </h2>
                            
                            <div class="resume-box" style="display: block; top: 150px;">
                                <div class="resume-content">
                                    <!--6.成就简述，最多120字 resume-->
                                    <span style="display: none; opacity: 1;">{{ item.resume }}</span>
                                </div>
                            </div>
                        </div>
                        <div class="title-footer">
                            <ul class="type-phone-info">
                                <li class="type">
                                    <ul class="type-list">
                                    <!--7.上传成就类型 type-->
                                        <li class="type-content">数学建模</li>
                                    </ul>
                                </li>
                                <!--8.本次成就的上传序号 num-->
                                <li class="phone-number">
                                    {{ item.num }}
                                </li>
                            </ul>
                        </div>
                    </div><!--suolve-bottom-box-->
                </div><!--suolve-->
            </div><!--white-->
            <div class = "pagination">
                <ul>
                    <li>1</li>
                    <li>2</li>
                    <li>3</li>
                    <li>4</li>
                    <li>上一页</li>
                    <li>下一页</li>
                    <li>首页</li>
                    <li>尾页</li>
                </ul>
            </div>
        </div>
    </template>


    <template id = "pannel">
        <div v-show = "show" class = "cc"><!--来自pannel组件-->
            <!-- <h2>{{ currentActivePannel }}</h2> -->
            <slot name = "checkbar"></slot>
            <slot name = "overview"></slot>
            <slot name = "classified"></slot>
            <!--空slot用于备用和占位符测试-->
            <slot></slot>
        </div>
    </template>


    <template id = "tag">
        <div class = "tag-container">
            <slot name = "pannel-describe"></slot>
            <ul class = "title-list">
                <li  
                    v-for = "(tag,index) in currentTagList" class = "titletag" @click = "updateActive(index)"
                    :class = "{'active-title':tabCls(index)}">
                        <span>{{ tag }}</span>
                </li>
            </ul>
            <slot :active-pannel = "activeTitle"></slot>
        </div>
    </template>

<!----------------------------------------以下为左侧内容模板---------------------------------------------------------->


    <template id = "left-avatar">
        <div class = "info-left" id = "info-left">
            <div class = "avatar-header">
                <!--头像与昵称的读取应该来自数据库-->
                <img class = "avatar-header" title = "点击更换头像" :src="currentAvatar">
                <!--点击图片会跳转到完善信息页面-->
                <span class = "personal-name" title = "点击更换昵称">{{ currentNickname }}</span>
                
                <div class = "manifesto">
                    <p class = "manifesto-text">{{ currentManifesto }}</p>
                </div>
            </div>
            <!--slot内应该插入manifesto组件，如果是游客视角则不必插入任何组件-->
            <slot></slot>
        </div>
    </template>
    

    <template id = "left-manifesto">
            <div class = "my-manifesto">
                <button @click = "maiShow = !maiShow" type="button" class="btn btn-default btn-manifesto">我的宣言</button>
                <transition name = "mani"
                 @before-leave = "maiBeforeLeave"
                 @leave = "maiLeave"
                 @beform-enter = "maiBeforeEnter"
                 @enter = "maiEnter"
                 :css = "false">
                <div v-show = "maiShow" id = "monstrous">
                    <textarea placeholder="input your manifesto..." v-model = "manifestoText"></textarea>
                    <div class = "minor-btn-group-1">
                        <button @click = "updateManifesto(); maiShow = !maiShow"  type="button" class="btn btn-default btn-deliver">发&nbsp;布</button>
                        <button type="button" @click = "maiShow = !maiShow" class="btn btn-default btn-cancel">取&nbsp;消</button>
                    </div>
                </div>
                </transition>
                <button type="button" class="btn btn-default btn-complete">个人信息</button>
            </div>
    </template>




</body>
<script src="js/getCookie.js"></script>
<!--Velocity-->
<script src = "velocity/velocity.min.js"></script>
<!--Vue2.5.17.js-->
<script src = "Vue/Vue_source/vue2.5.17.js"></script>
<!--Vue-resource-->
<script src = "Vue/Vue_source/vue-resource.min.js"></script>

    <!--左侧头像+宣言展示子组件-->
    <script src = "Vue/Vue_demo/personalpage/v_left_avatar.js"></script>
    <!--左侧按钮组+宣言上传组件-->
    <script src = "Vue/Vue_demo/personalpage/v-left_manifesto.js"></script>
    <!--左侧主体部分父组件-->
<script src = "Vue/Vue_demo/personalpage/v_left_index.js"></script>
<!--右侧父组件-->
<script src = "Vue/Vue_demo/personalpage/v_right_index.js"></script>

</html>